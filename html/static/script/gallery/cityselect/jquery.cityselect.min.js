define(["$"],function(a){var d=a("$");d.fn.citySelect=function(a){var b,c,e,f,j,k,l,m,n;this.length<1||(a=d.extend({url:"/static/script/gallery/cityselect/city.min.js",prov:null,city:null,dist:null,nodata:null,required:!0},a),b=this,c=b.find(".prov"),e=b.find(".city"),f=b.find(".dist"),a.prov,a.city,a.dist,j=a.required?"":"<option value=''>请选择</option>",l=function(){var b=c.get(0).selectedIndex;return a.required||b--,e.empty().attr("disabled",!0),f.empty().attr("disabled",!0),0>b||"undefined"==typeof k.citylist[b].c?("none"==a.nodata?(e.css("display","none"),f.css("display","none")):"hidden"==a.nodata&&(e.css("visibility","hidden"),f.css("visibility","hidden")),void 0):(temp_html=j,d.each(k.citylist[b].c,function(a,b){temp_html+="<option value='"+b.n+"'>"+b.n+"</option>"}),e.html(temp_html).attr("disabled",!1).css({display:"",visibility:""}),m(),void 0)},m=function(){var b=c.get(0).selectedIndex,g=e.get(0).selectedIndex;return a.required||(b--,g--),f.empty().attr("disabled",!0),0>b||0>g||"undefined"==typeof k.citylist[b].c[g].a?("none"==a.nodata?f.css("display","none"):"hidden"==a.nodata&&f.css("visibility","hidden"),void 0):(temp_html=j,d.each(k.citylist[b].c[g].a,function(a,b){temp_html+="<option value='"+b.s+"'>"+b.s+"</option>"}),f.html(temp_html).attr("disabled",!1).css({display:"",visibility:""}),void 0)},n=function(){temp_html=j,d.each(k.citylist,function(a,b){temp_html+="<option value='"+b.p+"'>"+b.p+"</option>"}),c.html(temp_html),setTimeout(function(){null!=a.prov&&(c.val(a.prov),l(),setTimeout(function(){null!=a.city&&(e.val(a.city),m(),setTimeout(function(){null!=a.dist&&f.val(a.dist)},1))},1))},1),c.bind("change",function(){l()}),e.bind("change",function(){m()})},"string"==typeof a.url?d.getJSON(a.url,function(a){k=a,n()}):(k=a.url,n()))}});